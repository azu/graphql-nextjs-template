name: 'Report Error'
description: 'CIが落ちた時にどのように対応するべきかを書く'
inputs:
  message:
    description: 'How to fix?'
    required: true
runs:
  using: "composite"
  steps:
    - name: How to Fix?
      if: failure()
      uses: actions/github-script@v7
      env:
        INPUT_MESSAGE: ${{ inputs.message }}
      with:
        script: |
          const message = process.env.INPUT_MESSAGE;
          const firstLine = message.split(/\n/)[0].replace(/^#{1,5}\s{0,5}?/, "");
          core.error(firstLine);
          core.summary.addRaw(message, true);
          await core.summary.write();
